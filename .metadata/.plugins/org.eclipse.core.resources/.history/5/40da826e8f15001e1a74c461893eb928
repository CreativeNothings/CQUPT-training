package com.DAO.Impl;

import com.DAO.UserDao;
import com.Entity.User;
import com.Util.DBHelper;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class UserDaoImpl implements UserDao {
    @Override
    public User selbyUsername(User user) {
        User returnUser = null;
        Connection con =null;
        //定义执行对象
        PreparedStatement ps = null;
        //定义结果集
        ResultSet rs =null;
        try{
            con = DBHelper.getCon();
            ps=con.prepareStatement("select * from user where username='"+user.getUsername()+"'");
            rs =ps.executeQuery();
            if(rs.next()){
                returnUser = new User();
                returnUser.setId(user.getId());
                returnUser.setUsername(rs.getString(2));
                returnUser.setPassword(rs.getString(3));
            }
        }catch(Exception e){
            e.printStackTrace();
        }finally {
            DBHelper.getClose(con,ps,rs);
        }
        return returnUser;
    }

@Test
public void testSelbyUsername(User user) {
	User user =new User();
	user.setUsername("tom");
	User user2 =new UserDaoImpl().selbyUsername(user);
	System.out.println(user2.getUsername());
	System.out.println(user2.getPassword());
}
}

